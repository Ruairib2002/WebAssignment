.row.mt-2
.col-6
%h2.mb-4
= tt('.location_radius_search')

= form_tag search_locations_path, method: :get do
%div{ data: { controller: "maps",
action: "google-maps-callback@window->maps#initMap",
maps_lng_value: @lng,
maps_lat_value: @lat,
maps_radius_value: @radius_in_m,
maps_businesses_value: @businesses_value.to_json,
maps_people_value: @people_value.to_json,
maps_items_value: @items_value.to_json } }

.row.mb-4{ data: { controller: "copy-inputs-from", copy_inputs_from_association_index_value: "0" } }
.col-4{ data: { controller: "select-visibility" }}
.row.mb-3
.col.offset-1
%h4= tt('.starting_point')
.row.mb-2
.col-4.text-end
= label_tag :lat, class: "form-label" do
= tt('.latitude')
.col-8
= text_field_tag :lat, @lat, class: 'form-control', data: { copy_inputs_from_target: "destination", maps_target: "lat" }
.row.mb-2
.col-4.text-end
= label_tag :lng, class: "form-label" do
= tt('.longitude')
.col-8
= text_field_tag :lng, @lng, class: 'form-control', data: { copy_inputs_from_target: "destination", maps_target: "lng" }
.row.mb-3
.col-4.text-end
= label_tag :radius, class: 'form-label' do
= tt('.radius')
.col-8
.input-group
= select_tag :unit, options_for_select(%w(miles feet), selected: @unit ),
class: "form-select", data: { maps_target: "unit" }
= number_field_tag :radius, @radius, class: 'form-control', data: { maps_target: "radius" }
.row.mb-3
.col-4.offset-1
%h4= tt('.select')
.row.mb-2
.col-4.text-end
= label_tag :entity, class: 'form-label' do
= tt('.entities')
.col-8
.btn-group{role: 'group', aria_label:"Basic checkbox toggle button group"}
= check_box_tag 'btncheck_businesses', '1', params[:btncheck_businesses], class: 'btn-check', autocomplete: 'off'
= label_tag tt('.businesses'), nil, class: 'btn btn-outline-primary', for: 'btncheck_businesses'
= check_box_tag 'btncheck_people', '1', params[:btncheck_people], class: 'btn-check', autocomplete: 'off'
= label_tag tt('.people'), nil, class: 'btn btn-outline-primary', for: 'btncheck_people'
.row.mb-4
.col-4.text-end
= label_tag :item_type_ids, class: 'form-label' do
= tt('.items')
.col-8
= select_tag :item_type_ids,
options_from_collection_for_select(@item_type_options, :id, :to_label, params[:item_type_ids]),
{ class: 'form-select form-control',
multiple: true,
data: { 'actions-box' => 'true',
'hide-disabled' => 'true',
'placeholder' => tt('.select_item_types'),
controller: 'selectpicker' }}
.row.mb-3
.col.offset-1
%h4= tt('.filter')
.row.mb-2
.col-4.text-end
= label_tag :entity, class: 'form-label' do
= tt('.program')
.col-8
= select_tag :program,
options_from_collection_for_select(@program_options, :id, :name, params[:program]),
{ include_blank: tt('.all'), class: "form-select",
data: { action: "select-visibility#setVisibility",
select_visibility_target: "program" } }
.row.mb-2{ data: { select_visibility_target: "row" } }
.col-4.text-end
= label_tag :entity, class: 'form-label' do
= tt('.status')
.col-8
= select_tag :status, options_for_select(@status_options, params[:status]),
{ include_blank: tt('All'), class: "form-select" }
.row.mt-4
.col-12
= submit_tag tt('.submit'), class: 'btn btn-primary float-end', data: { disable_with: t('Please wait...') }
.col-8.height
= content_tag :div, nil, data: { maps_target: "map" }, class: 'map'
.div{id: 'legend', style: 'background: white; margin: 5px; padding: 10px; border-radius: 5px'}

= render 'search_results' if (%w(btncheck_businesses btncheck_people item_type_ids) & params.keys).any?